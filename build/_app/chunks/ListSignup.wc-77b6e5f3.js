var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(s,t,n)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,o=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&i(e,t,s[t]);if(n)for(var t of n(s))r.call(s,t)&&i(e,t,s[t]);return e},l=(e,n)=>s(e,t(n));import{S as c,i as d,s as u,e as p,b as m,d as h,j as f,l as b,H as g,A as y,a as $,g as v,k,O,F as w,n as x,G as z,t as j,h as E,_ as T,o as P,I as U,W as N,v as I,$ as S,c as A,f as C,m as L,p as M,q as _,r as D}from"./vendor-23824d3e.js";let H={};["get","post","delete","put"].forEach((e=>{H[e]=async(s,t,n)=>await(async(e,s,t,n)=>{Array.isArray(s)&&(s=s.join("/"));try{let a={};if("delete"==e&&(a=l(o({},a),{credentials:"include",method:e.toUpperCase()})),"get"==e&&t){const n=Object.keys(t);for(let e=0;e<n.length;e++){const a=n[e];0==e&&(s+="?"),null!=t[a]&&""!=t[a]&&(s+=`${a}=${encodeURIComponent(t[a])}`,e!=n.length-1&&(s+="&"))}a=l(o({},a),{credentials:"include",method:e.toUpperCase()})}"put"!=e&&"post"!=e||(a=l(o({},a),{credentials:"include",method:e.toUpperCase(),body:JSON.stringify(t||{}),headers:{"Content-Type":"application/json"}})),n||console.log(`[fetcher] 🌟  ${s}`,a);const i=await fetch(s,a);let c=await i.text();try{c=JSON.parse(c)}catch(r){}return i.ok&&!c.error||console.log(`[fetcher] ❌  ${s}`,c.message,c.status,c.code),!i.ok||c.error?c:(n||console.log(`[fetcher] ✅  ${s}`,c),(e=>({code:200,status:200,error:!1,ok:!0,data:e}))(c))}catch(r){return n||console.log(`[fetcher] ❌  ${s}`,r.message,r.status,r.code),{code:a=500,status:a,error:!0,ok:!1,message:r.message}}var a})(e,s,t,n)}));const R=(e,s,t)=>`${e}/api/${s}/${t}`;function B(e,s,t){const n=e.slice();return n[26]=s[t],n[27]=s,n[28]=t,n}function J(e){let s,t,n,a,r,i,o,l,c,d,u,g,y,O,I,A,C,L,M,_=e[3]?"update":"subscribe",D=(e[4]||"")+"",H=(e[6]||"")+"",R=e[10],J=[];for(let p=0;p<R.length;p+=1)J[p]=q(B(e,R,p));let F=e[3]&&G(e);return{c(){s=p("form"),n=$(),a=p("input"),r=$(),i=p("input"),l=$();for(let e=0;e<J.length;e+=1)J[e].c();c=$(),d=p("button"),u=j(_),g=$(),F&&F.c(),y=$(),O=p("div"),I=j(D),A=$(),this.h()},l(e){s=m(e,"FORM",{action:!0,class:!0});var t=h(s);n=v(t),a=m(t,"INPUT",{disabled:!0,id:!0,placeholder:!0,name:!0,type:!0,class:!0}),r=v(t),i=m(t,"INPUT",{disabled:!0,id:!0,placeholder:!0,name:!0,type:!0,class:!0}),l=v(t);for(let s=0;s<J.length;s+=1)J[s].l(t);c=v(t),d=m(t,"BUTTON",{class:!0,disabled:!0});var o=h(d);u=E(o,_),o.forEach(f),g=v(t),F&&F.l(t),y=v(t),O=m(t,"DIV",{class:!0});var p=h(O);I=E(p,D),p.forEach(f),A=v(t),t.forEach(f),this.h()},h(){t=new S(n),a.disabled=e[5],k(a,"id","name"),k(a,"placeholder","name"),k(a,"name","name"),k(a,"type","text"),k(a,"class","ezipe-field-name"),w(a,"none",e[6]||e[3]),i.disabled=o=e[5]||e[3],k(i,"id","address"),k(i,"placeholder","email"),k(i,"name","address"),k(i,"type","text"),k(i,"class","ezipe-field-address"),w(i,"none",e[6]),k(d,"class","ezipe-button ezipe-button-submit filled"),d.disabled=e[5],w(d,"none",e[6]),k(O,"class","ezipe-error error"),w(O,"hidden",!e[4]),w(O,"none",e[6]),C=new S(null),k(s,"action",e[8]),k(s,"class","ezipe-mailing-list cmb1 flex column-stretch-flex-start")},m(o,p){b(o,s,p),t.m(e[9],s),x(s,n),x(s,a),T(a,e[0]),x(s,r),x(s,i),T(i,e[1]),x(s,l);for(let e=0;e<J.length;e+=1)J[e].m(s,null);x(s,c),x(s,d),x(d,u),x(s,g),F&&F.m(s,null),x(s,y),x(s,O),x(O,I),x(s,A),C.m(H,s),L||(M=[z(a,"input",e[20]),z(i,"input",e[21]),z(s,"submit",e[11])],L=!0)},p(e,n){if(512&n&&t.p(e[9]),32&n&&(a.disabled=e[5]),1&n&&a.value!==e[0]&&T(a,e[0]),72&n&&w(a,"none",e[6]||e[3]),40&n&&o!==(o=e[5]||e[3])&&(i.disabled=o),2&n&&i.value!==e[1]&&T(i,e[1]),64&n&&w(i,"none",e[6]),1124&n){let t;for(R=e[10],t=0;t<R.length;t+=1){const a=B(e,R,t);J[t]?J[t].p(a,n):(J[t]=q(a),J[t].c(),J[t].m(s,c))}for(;t<J.length;t+=1)J[t].d(1);J.length=R.length}8&n&&_!==(_=e[3]?"update":"subscribe")&&P(u,_),32&n&&(d.disabled=e[5]),64&n&&w(d,"none",e[6]),e[3]?F?F.p(e,n):(F=G(e),F.c(),F.m(s,y)):F&&(F.d(1),F=null),16&n&&D!==(D=(e[4]||"")+"")&&P(I,D),16&n&&w(O,"hidden",!e[4]),64&n&&w(O,"none",e[6]),64&n&&H!==(H=(e[6]||"")+"")&&C.p(H),256&n&&k(s,"action",e[8])},d(e){e&&f(s),U(J,e),F&&F.d(),L=!1,N(M)}}}function F(e){let s,t;return{c(){t=I(),this.h()},l(e){t=I(),this.h()},h(){s=new S(t)},m(n,a){s.m(e[7],n,a),b(n,t,a)},p(e,t){128&t&&s.p(e[7])},d(e){e&&f(t),e&&s.d()}}}function q(e){let s,t,n,a,r,i,o,l,c,d,u,g=e[26].key+"",y=e[26].text+"";function j(){e[22].call(t,e[26])}return{c(){s=p("label"),t=p("input"),n=$(),a=p("span"),r=$(),o=$(),l=p("em"),this.h()},l(e){s=m(e,"LABEL",{style:!0,class:!0});var i=h(s);t=m(i,"INPUT",{disabled:!0,type:!0}),n=v(i),a=m(i,"SPAN",{}),h(a).forEach(f),r=v(i),o=v(i),l=m(i,"EM",{class:!0}),h(l).forEach(f),i.forEach(f),this.h()},h(){t.disabled=e[5],k(t,"type","checkbox"),i=new S(o),k(l,"class","fade ml0-6"),O(s,"user-select","none"),k(s,"class",c="ezipe-field-label ezipe-field-"+e[26].key+" checkbox pointer user-select-none"),w(s,"none",e[6]),w(s,"disabled",e[5])},m(c,p){b(c,s,p),x(s,t),t.checked=e[2][e[26].key],x(s,n),x(s,a),x(s,r),i.m(g,s),x(s,o),x(s,l),l.innerHTML=y,d||(u=z(t,"change",j),d=!0)},p(n,a){e=n,32&a&&(t.disabled=e[5]),1028&a&&(t.checked=e[2][e[26].key]),1024&a&&g!==(g=e[26].key+"")&&i.p(g),1024&a&&y!==(y=e[26].text+"")&&(l.innerHTML=y),1024&a&&c!==(c="ezipe-field-label ezipe-field-"+e[26].key+" checkbox pointer user-select-none")&&k(s,"class",c),1088&a&&w(s,"none",e[6]),1056&a&&w(s,"disabled",e[5])},d(e){e&&f(s),d=!1,u()}}}function G(e){let s,t,n,a;return{c(){s=p("button"),t=j("unsubscribe"),this.h()},l(e){s=m(e,"BUTTON",{class:!0});var n=h(s);t=E(n,"unsubscribe"),n.forEach(f),this.h()},h(){k(s,"class","ezipe-button ezipe-button-unsubscribe")},m(r,i){b(r,s,i),x(s,t),n||(a=z(s,"click",e[12]),n=!0)},p:g,d(e){e&&f(s),n=!1,a()}}}function V(e){let s;function t(e,s){return e[7]?F:J}let n=t(e),a=n(e);return{c(){s=p("html"),a.c()},l(e){s=m(e,"HTML",{});var t=h(s);a.l(t),t.forEach(f)},m(e,t){b(e,s,t),a.m(s,null)},p(e,[r]){n===(n=t(e))&&a?a.p(e,r):(a.d(1),a=n(e),a&&(a.c(),a.m(s,null)))},i:g,o:g,d(e){e&&f(s),a.d()}}}function W(e,s,t){let n,a,r,i,o,l,c,d,{interests:u=[]}=s,{name:p=""}=s,{address:m=""}=s,{vars:h={}}=s,{root:f=null}=s,{user:b=null}=s,{css:g=""}=s,{message:$="Success"}=s,{link:v="/"}=s,{button:k="return"}=s,{editor:O=!1}=s;function w(e,s){const n=(a=window.location.search).slice(a.indexOf("?")+1).split("&").reduce(((e,s)=>{let[t,n]=s.split("=");return Object.assign(e,{[t]:decodeURIComponent(n)})}),{});var a;t(1,m=n.address),""==m&&t(1,m=null);(n.vars||"").split(",").forEach((e=>{x(s||"").find((s=>s.key==e))&&t(2,h[e]=!0,h)})),O&&(m&&0!=Object.keys(h).length||t(7,d=`\n                <div class="ezipe-success ezipe-message">Address and vars must be set in URL search params, ie:</div>\n                <div class="ezipe-success ezipe-details monospace mt2">?address=${m||"foo@bar.com"}&news=annoucements&code=opensource</div>\n            `))}function x(e){return"string"!=typeof u?e:e.split(",").filter((e=>""!=e)).map((e=>({key:e.split(":")[0],text:e.split(":")[1]})))}return y((async e=>{console.log(`[list-signup] ✨  mounted with ${f} ${b} ${JSON.stringify(h)}`)})),e.$$set=e=>{"interests"in e&&t(13,u=e.interests),"name"in e&&t(0,p=e.name),"address"in e&&t(1,m=e.address),"vars"in e&&t(2,h=e.vars),"root"in e&&t(14,f=e.root),"user"in e&&t(15,b=e.user),"css"in e&&t(16,g=e.css),"message"in e&&t(17,$=e.message),"link"in e&&t(18,v=e.link),"button"in e&&t(19,k=e.button),"editor"in e&&t(3,O=e.editor)},e.$$.update=()=>{8200&e.$$.dirty&&w(0,u),917507&e.$$.dirty&&(n=`\n        <div>${$}</div>\n        <div class="monospace mb2">${p} &lt;${m}&gt;</div>\n        <a class="filled button text-center" href="${v}">${k}</a>\n    `),49152&e.$$.dirty&&t(8,a=R(f,b,"signup_mailing_list")),65536&e.$$.dirty&&t(9,r=`\n        <style>\n            @import "${g}";\n        </style>\n    `),8192&e.$$.dirty&&t(10,i="string"==typeof u?x(u):u)},[p,m,h,O,o,l,c,d,a,r,i,async function(e){console.log("[list-signup] 🌐  submitting",{name:p,address:m,vars:h}),t(4,o=null),t(5,l=!0),e.preventDefault(),e.stopPropagation();const s=await H.post(e.target.action,{name:p,address:m,vars:h});s.ok&&t(6,c=n),s.ok||t(4,o=s.message),t(5,l=!1)},async function(e){t(4,o=null),t(5,l=!0),e.preventDefault(),e.stopPropagation();const s=await H.post(R(f,b,"unsubscribe_mailing_list"),{name:p,address:m,vars:h});s.ok&&t(6,c=n),s.ok||t(4,o=s.message),t(5,l=!1)},u,f,b,g,$,v,k,function(){p=this.value,t(0,p)},function(){m=this.value,t(1,m)},function(e){h[e.key]=this.checked,t(2,h),t(10,i),t(13,u)}]}class K extends c{constructor(e){super(),d(this,e,W,V,u,{interests:13,name:0,address:1,vars:2,root:14,user:15,css:16,message:17,link:18,button:19,editor:3})}}function Q(e){let s,t;return s=new K({props:{interests:e[0],root:e[1],user:e[2],css:e[3],message:e[4],link:e[5],button:e[6],editor:!1}}),{c(){A(s.$$.fragment)},l(e){C(s.$$.fragment,e)},m(e,n){L(s,e,n),t=!0},p(e,[t]){const n={};1&t&&(n.interests=e[0]),2&t&&(n.root=e[1]),4&t&&(n.user=e[2]),8&t&&(n.css=e[3]),16&t&&(n.message=e[4]),32&t&&(n.link=e[5]),64&t&&(n.button=e[6]),s.$set(n)},i(e){t||(M(s.$$.fragment,e),t=!0)},o(e){_(s.$$.fragment,e),t=!1},d(e){D(s,e)}}}function X(e,s,t){let{interests:n=[]}=s,{root:a=null}=s,{user:r=null}=s,{css:i=""}=s,{message:o="Thank you, you have been subscribed as:"}=s,{link:l="/"}=s,{button:c="return"}=s;return e.$$set=e=>{"interests"in e&&t(0,n=e.interests),"root"in e&&t(1,a=e.root),"user"in e&&t(2,r=e.user),"css"in e&&t(3,i=e.css),"message"in e&&t(4,o=e.message),"link"in e&&t(5,l=e.link),"button"in e&&t(6,c=e.button)},[n,a,r,i,o,l,c]}export default class extends c{constructor(e){super(),d(this,e,X,Q,u,{interests:0,root:1,user:2,css:3,message:4,link:5,button:6})}}
