import{S as t,i as a,s as e,e as i,b as l,d as s,j as o,k as n,l as r,H as c,G as d,W as h,U as u}from"./vendor-23824d3e.js";function p(t){let a,e,c,u,p=!0;return{c(){a=i("video"),this.h()},l(t){a=l(t,"VIDEO",{class:!0,width:!0,height:!0,src:!0,muted:!0,autoplay:!0,loop:!0,preload:!0,controls:!0,poster:!0,title:!0,alt:!0}),s(a).forEach(o),this.h()},h(){n(a,"class","w100pc h-auto"),n(a,"width",t[7]),n(a,"height",t[8]),a.src!==(e=t[6])&&n(a,"src",e),a.muted=t[2],a.autoplay=t[1],a.loop=t[3],n(a,"preload","auto"),a.controls=!1,n(a,"poster",t[13]),n(a,"title",t[10]),n(a,"alt",t[11])},m(e,i){r(e,a,i),c||(u=[d(a,"play",t[19]),d(a,"pause",t[19])],c=!0)},p(t,i){128&i&&n(a,"width",t[7]),256&i&&n(a,"height",t[8]),64&i&&a.src!==(e=t[6])&&n(a,"src",e),4&i&&(a.muted=t[2]),2&i&&(a.autoplay=t[1]),8&i&&(a.loop=t[3]),1024&i&&n(a,"title",t[10]),2048&i&&n(a,"alt",t[11]),1&i&&p!==(p=t[0])&&a[p?"pause":"play"]()},d(t){t&&o(a),c=!1,h(u)}}}function f(t){let a,e;return{c(){a=i("img"),this.h()},l(t){a=l(t,"IMG",{class:!0,width:!0,height:!0,src:!0,title:!0,alt:!0}),this.h()},h(){n(a,"class","w100pc h-auto"),n(a,"width",t[7]),n(a,"height",t[8]),a.src!==(e=t[6])&&n(a,"src",e),n(a,"title",t[10]),n(a,"alt",t[11])},m(t,e){r(t,a,e)},p(t,i){128&i&&n(a,"width",t[7]),256&i&&n(a,"height",t[8]),64&i&&a.src!==(e=t[6])&&n(a,"src",e),1024&i&&n(a,"title",t[10]),2048&i&&n(a,"alt",t[11])},d(t){t&&o(a)}}}function m(t){let a,e,d;let h=(u=t)[14]("image")?f:u[14]("video")?p:void 0;var u;let m=h&&h(t);return{c(){a=i("span"),m&&m.c(),this.h()},l(t){a=l(t,"SPAN",{class:!0,"data-width":!0,"data-height":!0,"data-ratio":!0,style:!0});var e=s(a);m&&m.l(e),e.forEach(o),this.h()},h(){var i;n(a,"class",e="block rel w100pc "+t[4]),n(a,"data-width",t[7]),n(a,"data-height",t[8]),n(a,"data-ratio",t[9]),n(a,"style",d=`\n\t\t${t[5]};\n\t\tline-height: 0px;\n\t\tbackground-color:${(null==(i=t[12])?void 0:i.vibrant)||"#111"};\n\t\t\n\t`)},m(t,e){r(t,a,e),m&&m.m(a,null)},p(t,[i]){var l;m&&m.p(t,i),16&i&&e!==(e="block rel w100pc "+t[4])&&n(a,"class",e),128&i&&n(a,"data-width",t[7]),256&i&&n(a,"data-height",t[8]),512&i&&n(a,"data-ratio",t[9]),4128&i&&d!==(d=`\n\t\t${t[5]};\n\t\tline-height: 0px;\n\t\tbackground-color:${(null==(l=t[12])?void 0:l.vibrant)||"#111"};\n\t\t\n\t`)&&n(a,"style",d)},i:c,o:c,d(t){t&&o(a),m&&m.d()}}}function y(t,a,e){let i,l,s,o,n,r,c,{file:d}=a,{format:h=""}=a,{active:u=!1}=a,{paused:p=!0}=a,{autoplay:f=!1}=a,{muted:m=!0}=a,{loop:y=!0}=a,{root:g=null}=a,{class:v=""}=a,{style:$=""}=a;function w(t){try{if(b("image")){const t=d.exif[0].ImageSize.split("x");e(7,n=parseInt(t[0])),e(8,r=parseInt(t[1]))}b("video")&&d.ffprobe.streams.forEach((t=>{null!=(null==t?void 0:t.width)&&e(7,n=t.width),null!=(null==t?void 0:t.height)&&e(8,r=t.height)})),e(9,c=r/n*100)}catch(a){console.error(a)}}const b=t=>-1!=d.mime.indexOf(t);return t.$$set=t=>{"file"in t&&e(15,d=t.file),"format"in t&&e(16,h=t.format),"active"in t&&e(17,u=t.active),"paused"in t&&e(0,p=t.paused),"autoplay"in t&&e(1,f=t.autoplay),"muted"in t&&e(2,m=t.muted),"loop"in t&&e(3,y=t.loop),"root"in t&&e(18,g=t.root),"class"in t&&e(4,v=t.class),"style"in t&&e(5,$=t.style)},t.$$.update=()=>{32768&t.$$.dirty&&async function(t){if(d){w();const t=d.basename,a=g||"/"+d.location.name+"/",i=t.lastIndexOf("."),l=t.slice(0,i),s=t.slice(i);console.log(t,a,i,l,s),e(6,o=a+l+h+s)}}(),32768&t.$$.dirty&&e(10,i=d.title),32768&t.$$.dirty&&e(11,l=d.title),32768&t.$$.dirty&&w(),32768&t.$$.dirty&&e(12,s=function(t){if(!(null==d?void 0:d.vibrant))return{};let a={};for(const[e,i]of Object.entries(d.vibrant))a[e.toLowerCase()]=`rgb(${i.rgb.join(",")})`;return a}())},[p,f,m,y,v,$,o,n,r,c,i,l,s,undefined,b,d,h,u,g,function(){p=this.paused,e(0,p)}]}class g extends t{constructor(t){super(),a(this,t,y,m,e,{file:15,format:16,active:17,paused:0,autoplay:1,muted:2,loop:3,root:18,class:4,style:5})}}const v=u({}),$=u({});export{g as M,$ as c,v as s};
